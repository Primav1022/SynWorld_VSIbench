# SynWorld VSI Bench 脚本使用指南

## 脚本概览

本项目提供了三个主要的处理脚本，适用于不同的使用场景：

| 脚本名称 | 适用场景 | 特点 | 推荐用途 |
|---------|---------|------|---------|
| `quick_process.py` | 单个数据文件夹 | 快速处理，跳过可视化 | **测试和开发** |
| `run_single.py` | 单个数据文件夹 | 完整流程，包含可视化 | 单个数据完整处理 |
| `batch_process.py` | 多个数据文件夹 | 批量处理，支持并行 | **生产环境批量处理** |

## 快速开始

### 1. 测试单个数据（推荐）

```bash
# 激活虚拟环境
source .venv/bin/activate

# 快速处理单个数据文件夹
python quick_process.py 20250820-151238 --skip_visualization
```

### 2. 完整处理单个数据

```bash
# 编辑 run_single.py 顶部的配置
# ENABLE_VISUALIZATIONS = True/False
# ENABLE_INFERENCE_SCRIPTS = True/False

# 运行完整流程
python run_single.py
```

### 3. 批量处理多个数据

```bash
# 处理所有数据文件夹
python batch_process.py --data_root data --output_root processed_data --parallel 4

# 跳过可视化（更快）
python batch_process.py --data_root data --output_root processed_data --parallel 4 --skip_visualization
```

## 脚本详细说明

### quick_process.py
- **用途**: 快速测试和开发
- **特点**: 
  - 命令行参数控制
  - 跳过可视化（可选）
  - 详细的进度日志
  - 错误处理
- **输出**: 各个工具目录的CSV文件

### run_single.py
- **用途**: 单个数据的完整处理
- **特点**:
  - 硬编码配置
  - 包含可视化脚本
  - 包含推理脚本（可选）
  - 适合完整流程测试
- **输出**: 各个工具目录的CSV文件和可视化图片

### batch_process.py
- **用途**: 生产环境批量处理
- **特点**:
  - 支持并行处理
  - 错误隔离
  - 完整日志记录
  - 结果统计
  - 文件统一管理
- **输出**: 统一输出目录，包含所有CSV文件和处理结果

## 性能建议

### 单机处理
```bash
# 少量数据（<10个文件夹）
python batch_process.py --parallel 2

# 中等数据（10-50个文件夹）
python batch_process.py --parallel 4 --skip_visualization

# 大量数据（>50个文件夹）
python batch_process.py --parallel 8 --skip_visualization
```

### 分批处理
```bash
# 对于100个文件夹，建议分批处理
python batch_process.py --data_root data --output_root batch1 --parallel 4 --skip_visualization
python batch_process.py --data_root data --output_root batch2 --parallel 4 --skip_visualization
# ... 继续分批
```

## 常见问题

### Q: 应该使用哪个脚本？
- **测试单个数据**: `quick_process.py`
- **完整处理单个数据**: `run_single.py`
- **批量处理多个数据**: `batch_process.py`

### Q: 如何处理错误？
- `quick_process.py`: 显示详细错误信息
- `run_single.py`: 遇到错误停止
- `batch_process.py`: 记录错误，继续处理其他文件夹

### Q: 如何监控进度？
- `quick_process.py`: 实时显示进度
- `run_single.py`: 简单进度显示
- `batch_process.py`: 详细日志文件 + 实时显示

### Q: 输出文件在哪里？
- `quick_process.py`: 各个工具目录的 `output/` 文件夹
- `run_single.py`: 各个工具目录的 `output/` 文件夹
- `batch_process.py`: 指定的输出目录，按数据文件夹组织

## 环境要求

```bash
# 创建虚拟环境
python3 -m venv .venv

# 激活环境
source .venv/bin/activate

# 安装依赖
pip install pandas numpy matplotlib opencv-python
```
